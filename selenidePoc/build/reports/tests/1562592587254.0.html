<html><head><style type="text/css">@charset "UTF-8";[ng\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>
        <title>OpenMRS Electronic Medical Record</title>
        <link rel="shortcut icon" type="image/ico" href="/openmrs/images/openmrs-favicon.ico">
        <link rel="icon" type="image/png\" href="/openmrs/images/openmrs-favicon.png">
        
        <script type="text/javascript" src="/openmrs/ms/uiframework/resource/uicommons/scripts/jquery-1.12.4.min.js?cache=1562591248209"></script>
<script type="text/javascript" src="/openmrs/ms/uiframework/resource/uicommons/scripts/handlebars/handlebars.min.js?cache=1562591248209"></script>
<script type="text/javascript" src="/openmrs/ms/uiframework/resource/uicommons/scripts/jquery-ui-1.9.2.custom.min.js?cache=1562591248209"></script>
<script type="text/javascript" src="/openmrs/ms/uiframework/resource/uicommons/scripts/underscore-min.js?cache=1562591248209"></script>
<script type="text/javascript" src="/openmrs/ms/uiframework/resource/uicommons/scripts/knockout-2.2.1.js?cache=1562591248209"></script>
<script type="text/javascript" src="/openmrs/ms/uiframework/resource/uicommons/scripts/emr.js?cache=1562591248209"></script>
<script type="text/javascript" src="/openmrs/ms/uiframework/resource/uicommons/scripts/navigator/validators.js?cache=1562591248209"></script>
<script type="text/javascript" src="/openmrs/ms/uiframework/resource/uicommons/scripts/navigator/navigator.js?cache=1562591248209"></script>
<script type="text/javascript" src="/openmrs/ms/uiframework/resource/uicommons/scripts/jquery.toastmessage.js?cache=1562591248209"></script>
<script type="text/javascript" src="/openmrs/ms/uiframework/resource/uicommons/scripts/jquery.simplemodal.1.4.4.min.js?cache=1562591248209"></script>
<script type="text/javascript" src="/openmrs/ms/uiframework/resource/uicommons/scripts/navigator/navigatorHandlers.js?cache=1562591248209"></script>
<script type="text/javascript" src="/openmrs/ms/uiframework/resource/uicommons/scripts/navigator/navigatorModels.js?cache=1562591248209"></script>
<script type="text/javascript" src="/openmrs/ms/uiframework/resource/uicommons/scripts/navigator/navigatorTemplates.js?cache=1562591248209"></script>
<script type="text/javascript" src="/openmrs/ms/uiframework/resource/uicommons/scripts/navigator/exitHandlers.js?cache=1562591248209"></script>
<script type="text/javascript" src="/openmrs/ms/uiframework/resource/registrationapp/scripts/registerPatient.js?cache=1562591248209"></script>
<script type="text/javascript" src="/openmrs/ms/uiframework/resource/uicommons/scripts/typeahead.js?cache=1562591248209"></script>
<script type="text/javascript" src="/openmrs/ms/uiframework/resource/uicommons/scripts/angular.js?cache=1562591248209"></script>
<script type="text/javascript" src="/openmrs/ms/uiframework/resource/uicommons/scripts/angular-common.js?cache=1562591248209"></script>
<script type="text/javascript" src="/openmrs/ms/uiframework/resource/uicommons/scripts/angular-resource.min.js?cache=1562591248209"></script>
<script type="text/javascript" src="/openmrs/ms/uiframework/resource/uicommons/scripts/angular-ui/ui-bootstrap-tpls-0.6.0.min.js?cache=1562591248209"></script>
<script type="text/javascript" src="/openmrs/ms/uiframework/resource/uicommons/scripts/services/personService.js?cache=1562591248209"></script>
<script type="text/javascript" src="/openmrs/ms/uiframework/resource/registrationapp/scripts/field/personRelationship.js?cache=1562591248209"></script>
<link rel="stylesheet" href="/openmrs/ms/uiframework/resource/uicommons/styles/styleguide/jquery-ui-1.9.2.custom.min.css?cache=1562591248209" type="text/css">
<link rel="stylesheet" href="/openmrs/ms/uiframework/resource/uicommons/styles/styleguide/jquery.toastmessage.css?cache=1562591248209" type="text/css">
<link rel="stylesheet" href="/openmrs/ms/uiframework/resource/registrationapp/styles/registerPatient.css?cache=1562591248209" type="text/css">
<link rel="stylesheet" href="/openmrs/ms/uiframework/resource/appui/styles/header.css?cache=1562591248209" type="text/css">
<link rel="stylesheet" href="/openmrs/ms/uiframework/resource/referenceapplication/styles/referenceapplication.css?cache=1562591248209" type="text/css">

    </head>
    <body>
        <script type="text/javascript">
            var OPENMRS_CONTEXT_PATH = 'openmrs';
            var openmrsContextPath = '/' + OPENMRS_CONTEXT_PATH;
            window.sessionContext = window.sessionContext || {
                locale: "en_GB"
            };
            window.translations = window.translations || {};
            var openmrs = {
                server: {
                    timezone: "+0530",
                    timezoneOffset: -330
                }
            }
        </script>


<script type="text/javascript">

    var sessionLocationModel = {
        id: ko.observable(),
        text: ko.observable()
    };

    jq(function () {

        ko.applyBindings(sessionLocationModel, jq('.change-location').get(0));
        sessionLocationModel.id(11);
        sessionLocationModel.text("Acme Clinic");

        // we only want to activate the functionality to change location if there are actually multiple login locations
        

            jq(".change-location a").click(function () {
                jq('#session-location').show();
                jq(this).addClass('focus');
                jq(".change-location a i:nth-child(3)").removeClass("icon-caret-down");
                jq(".change-location a i:nth-child(3)").addClass("icon-caret-up");
            });

            jq('#session-location').mouseleave(function () {
                jq('#session-location').hide();
                jq(".change-location a").removeClass('focus');
                jq(".change-location a i:nth-child(3)").addClass("icon-caret-down");
                jq(".change-location a i:nth-child(3)").removeClass("icon-caret-up");
            });

            jq("#session-location ul.select li").click(function (event) {
                var element = jq(event.target);
                var locationId = element.attr("locationId");
                var locationUuid = element.attr("locationUuid");
                var locationName = element.attr("locationName");

                var data = { locationId: locationId };

                jq("#spinner").show();

                jq.post(emr.fragmentActionLink("appui", "session", "setLocation", data), function (data) {
                    sessionLocationModel.id(locationId);
                    sessionLocationModel.text(locationName);
                    jq('#selected-location').attr("location-uuid", locationUuid);
                    jq('#session-location li').removeClass('selected');
                    element.addClass('selected');
                    jq("#spinner").hide();
                    jq(document).trigger("sessionLocationChanged");
                })

                jq('#session-location').hide();
                jq(".change-location a").removeClass('focus');
                jq(".change-location a i:nth-child(3)").addClass("icon-caret-down");
                jq(".change-location a i:nth-child(3)").removeClass("icon-caret-up");
            });

            
            jq('.identifier').hover(
                function(){
                    jq('.appui-toggle').show();
                    jq('.appui-icon-caret-down').hide();
                },
                 function(){
                    jq('.appui-toggle').hide();
                    jq('.appui-icon-caret-down').show();
                 }
            );
            jq('.identifier').css('cursor', 'pointer');
            
        
    });

</script>

<header>
    <div class="logo">
        <a href="/openmrs/referenceapplication/home.page">
            <img src="/openmrs/ms/uiframework/resource/uicommons/images/logo/openmrs-with-title-small.png">
        </a>
    </div>
    
    <ul class="user-options">
        <li class="identifier" style="cursor: pointer;">
            <i class="icon-user small"></i>
            admin
            
            <i class="icon-caret-down appui-icon-caret-down link"></i><i class="icon-caret-up link appui-toggle" style="display: none;"></i>
                <ul id="user-account-menu" class="appui-toggle">
                    
                    <li>
                        <a id="" href="/openmrs/adminui/myaccount/myAccount.page">
                            My Account
                        </a>
                    </li>
                    
                </ul>
            
        </li>
        <li class="change-location">
            <a href="javascript:void(0);">
                <i class="icon-map-marker small"></i>
                <span id="selected-location" data-bind="text: text" location-uuid="a03e395c-b881-49b7-b6fc-983f6bddc7fc">Acme Clinic</span>
                
                    <i class="icon-caret-down link"></i>
                
            </a>
        </li>
        <li class="logout">
            <a href="/openmrs/appui/header/logout.action?successUrl=openmrs">
                Logout
                <i class="icon-signout small"></i>
            </a>
        </li>
    </ul>

    <div id="session-location">
        <div id="spinner" style="position:absolute; display:none">
            <img src="/openmrs/ms/uiframework/resource/uicommons/images/spinner.gif">
        </div>
        <ul class="select">
            
            <li class="selected" locationuuid="a03e395c-b881-49b7-b6fc-983f6bddc7fc" locationid="11" locationname="Acme Clinic">Acme Clinic</li>
            
            <li class="" locationuuid="b1a8b05e-3542-4037-bbd3-998ee9c40574" locationid="6" locationname="Inpatient Ward">Inpatient Ward</li>
            
            <li class="" locationuuid="2131aff8-2e2a-480a-b7ab-4ac53250262b" locationid="4" locationname="Isolation Ward">Isolation Ward</li>
            
            <li class="" locationuuid="7fdfa2cb-bc95-405a-88c6-32b7673c0453" locationid="3" locationname="Laboratory">Laboratory</li>
            
            <li class="" locationuuid="58c57d25-8d39-41ab-8422-108a0c277d98" locationid="7" locationname="Outpatient Clinic">Outpatient Clinic</li>
            
            <li class="" locationuuid="7f65d926-57d6-4402-ae10-a5b3bcbf7986" locationid="2" locationname="Pharmacy">Pharmacy</li>
            
            <li class="" locationuuid="6351fcf4-e311-4a19-90f9-35667d99a8af" locationid="5" locationname="Registration Desk">Registration Desk</li>
            
            <li class="" locationuuid="d8da9a21-0f95-4643-9ea2-b2705160b9e3" locationid="9" locationname="The Lake Clinic-Cambodia">The Lake Clinic-Cambodia</li>
            
        </ul>
    </div>
    
</header>

<ul id="breadcrumbs">
    <li>
        
        
        <a href="/openmrs/index.htm">
        
        
        <i class="icon-home small"></i>
        
        
        
        </a>
        
    </li>

    <li>
        
        <i class="icon-chevron-right link"></i>
        
        
        
        
        Register a patient
        
        
    </li>
</ul>

<div id="body-wrapper">

    

<script type="text/javascript">
     
    
</script>

<div id="error-message" class="note-container">
    <div class="note error" style="display: none">
        <div class="text">
            <i class="icon-remove medium"></i>
            
        </div>
        <div class="close-icon"><i class="icon-remove"></i></div>
    </div>
</div>

<div id="info-message" class="note-container">
    <div class="note success" style="display: none">
        <div class="text">
            <i class="icon-ok medium"></i>
            
        </div>
        <div class="close-icon"><i class="icon-remove"></i></div>
    </div>
</div>

    <div id="content" class="container">
        



<!-- used within registerPatient.js -->


<script type="text/javascript">
    window.messages = window.messages || { };
    
        window.messages['emr.gender.M'] = 'Male';
    
        window.messages['emr.gender.F'] = 'Female';
    
</script>

<script type="text/javascript">
    var emrMessages = {
        requiredField: "Required",
        dateField: "You need to inform a valid date",
        dateInFuture: "The specified date is in the future",
        selectedMonthHas30Days: "There are only 30 days in the selected month",
        februaryDaysOutOfRange: "There are only 28 days in february for the specified year",
        integerField: "Must be a whole number",
        phoneField: "Must be a valid phone number (with +, -, numbers or parentheses)",
        numberField: "Must be a number",
        numericRangeLow: "Minimum: {0}",
        numericRangeHigh: "Maximum: {0}",
        atleastOneFieldRequired: "You need to provide a value for at least one field",
        invalid: "Invalid."
    }
</script>


<style type="text/css">
.matchingPatientContainer .container {
    overflow: hidden;
}

.matchingPatientContainer .container div {
    margin: 5px 10px;
}

.matchingPatientContainer .container .name {
    font-size: 25px;
    display: inline-block;
}

.matchingPatientContainer .container .info {
    font-size: 15px;
    display: inline-block;
}

.matchingPatientContainer .container .identifiers {
    font-size: 15px;
    display:inline-block;
    min-width: 600px;
}

.matchingPatientContainer .container .identifiers .idName {
    font-size: 15px;
    font-weight: bold;
}

.matchingPatientContainer .container .identifiers .idValue {
    font-size: 15px;
    margin: 0 20px 0 0;
}
</style>
<script type="text/javascript">

    var breadcrumbs = _.compact(_.flatten([
        { icon: "icon-home", link: '/' + OPENMRS_CONTEXT_PATH + '/index.htm' },
        ,
        { label: "Register a patient", link: "/openmrs/registrationapp/registerPatient.page" }
    ]));

    var testFormStructure = "org.openmrs.module.registrationapp.model.NavigableFormStructure@50bb5680";
    var patientDashboardLink = '/openmrs/coreapps/clinicianfacing/patient.page';
    var appId = 'referenceapplication.registrationapp.registerPatient';

    // hack to create the sections variable used by the unknown patient handler in registerPatient.js
    var sections =  [];
    
            sections.push('demographics');
    
            sections.push('contactInfo');
    
            sections.push('relationships-info');
    

</script>

<div id="validation-errors" class="note-container" style="display: none">
    <div class="note error">
        <div id="validation-errors-content" class="text">

        </div>
    </div>
</div>

<div id="content" class="container">
    <h2>
        Register a patient
    </h2>

	<div id="similarPatients" class="highlighted" style="display: none;">
		   <div class="left" style="padding: 6px"><span id="similarPatientsCount"></span> similar patient(s) found</div><button class="right" id="reviewSimilarPatientsButton">Review patient(s)</button>
		   <div class="clear"></div>
	</div>

    <div id="similarPatientsSlideView" style="display: none;">
        <ul id="similarPatientsSelect" class="matchingPatientContainer select" style="width: auto;">

        </ul>
    </div>

    <div id="biometricPatients" class="highlighted" style="display: none;">
        <div class="left" style="padding: 6px"><span id="biometricPatientsCount"></span> patient(s) with matching biometrics found</div><button class="right" id="reviewBiometricPatientsButton">Review patient(s)</button>
        <div class="clear"></div>
    </div>

    <div id="biometricPatientsSlideView" style="display: none;">
        <ul id="biometricPatientsSelect" class="matchingPatientContainer select" style="width: auto;">

        </ul>
    </div>

    <div id="matchedPatientTemplates" style="display:none;">
        <div class="container" style="border-color: #00463f; border-style: solid; border-width:2px; margin-bottom: 10px;">
            <div class="name"></div>
            <div class="info"></div>
            <div class="identifiers">
                <span class="idName idNameTemplate"></span><span class="idValue idValueTemplate"></span>
            </div>
        </div>
        <button class="local_button" style="float:right; margin:10px; padding: 2px 8px" onclick="location.href='/openmrs-standalone/coreapps/clinicianfacing/patient.page?patientId=7'">
            Open
        </button>
        <button class="mpi_button" style="float:right; margin:10px; padding: 2px 8px" onclick="location.href='/execute_script_which_will_request_service_to_import_patient_from_mpi_to_local_DB_and_redirect_to_patient_info'">
            Import and Open
        </button>
    </div>

    <form class="simple-form-ui" id="registration" method="POST"><ul id="formBreadcrumb" class="options"><li class="doing"><span id="demographics_label">Demographics</span><ul><li class="question-legend focused"><i class="icon-ok"></i><span>Name</span></li><li class="question-legend"><i class="icon-ok"></i><span id="genderLabel">Gender</span></li><li class="question-legend"><i class="icon-ok"></i><span id="birthdateLabel">Birthdate</span></li></ul></li><li class="doing"><span id="contactInfo_label">Contact Info</span><ul><li class="question-legend"><i class="icon-ok"></i><span>Address</span></li><li class="question-legend"><i class="icon-ok"></i><span>Phone Number</span></li></ul></li><li class="doing"><span id="relationships-info_label">Relationships</span><ul><li class="question-legend"><i class="icon-ok"></i><span>Relatives</span></li></ul></li><li><span id="confirmation_label">Confirm</span></li></ul>

        

        <!-- read configurable sections from the json config file-->
        
            <section id="demographics" class="non-collapsible focused">
                

                    <!-- hardcoded name, gender, and birthdate are added for the demographics section -->
                    

                        <fieldset id="demographics-name" class="focused">

                            <legend>Name</legend>
                            <div>
                                <h3>What's the patient's name?</h3>

                                
                                

<p class="left">

    <label for="fr9106-field">
        Given <span>(required)</span>
    </label>

    <input type="text" id="fr9106-field" name="givenName" value="" class="required focused ui-autocomplete-input" autocomplete="off"><span role="status" aria-live="polite" class="ui-helper-hidden-accessible"></span>

    <span id="fr8262" class="field-error" style="display: none"></span>
    
</p>


<script type="text/javascript">

    jq(function() {
        jq("#fr9106-field" ).autocomplete({
            source: function( request, response ) {
                jq.ajax({
                    url: "/openmrs/registrationapp/personName/getSimilarNames.action?successUrl=%2Fopenmrs%2Fregistrationapp%2FregisterPatient.page%3FappId%3Dreferenceapplication.registrationapp.registerPatient%26",
                    dataType: "json",
                    data: {
                        'searchPhrase': request.term,
                        'formFieldName': 'givenName'
                    },
                    success: function( data ) {
                        response( jq.map( data.names, function( item ) {
                            return {
                                label: item,
                                value: item
                            }
                        }));
                    }
                });
            },
            minLength: 1
        });
    });

</script>


                                
                                

<p class="left">

    <label for="fr7830-field">
        Middle 
    </label>

    <input type="text" id="fr7830-field" name="middleName" value="" class="ui-autocomplete-input" autocomplete="off"><span role="status" aria-live="polite" class="ui-helper-hidden-accessible"></span>

    <span id="fr2319" class="field-error" style="display: none"></span>
    
</p>


<script type="text/javascript">

    jq(function() {
        jq("#fr7830-field" ).autocomplete({
            source: function( request, response ) {
                jq.ajax({
                    url: "/openmrs/registrationapp/personName/getSimilarNames.action?successUrl=%2Fopenmrs%2Fregistrationapp%2FregisterPatient.page%3FappId%3Dreferenceapplication.registrationapp.registerPatient%26",
                    dataType: "json",
                    data: {
                        'searchPhrase': request.term,
                        'formFieldName': 'middleName'
                    },
                    success: function( data ) {
                        response( jq.map( data.names, function( item ) {
                            return {
                                label: item,
                                value: item
                            }
                        }));
                    }
                });
            },
            minLength: 1
        });
    });

</script>


                                
                                

<p class="left">

    <label for="fr2425-field">
        Family Name <span>(required)</span>
    </label>

    <input type="text" id="fr2425-field" name="familyName" value="" class="required ui-autocomplete-input" autocomplete="off"><span role="status" aria-live="polite" class="ui-helper-hidden-accessible"></span>

    <span id="fr7757" class="field-error" style="display: none"></span>
    
</p>


<script type="text/javascript">

    jq(function() {
        jq("#fr2425-field" ).autocomplete({
            source: function( request, response ) {
                jq.ajax({
                    url: "/openmrs/registrationapp/personName/getSimilarNames.action?successUrl=%2Fopenmrs%2Fregistrationapp%2FregisterPatient.page%3FappId%3Dreferenceapplication.registrationapp.registerPatient%26",
                    dataType: "json",
                    data: {
                        'searchPhrase': request.term,
                        'formFieldName': 'familyName'
                    },
                    success: function( data ) {
                        response( jq.map( data.names, function( item ) {
                            return {
                                label: item,
                                value: item
                            }
                        }));
                    }
                });
            },
            minLength: 1
        });
    });

</script>


                                
                            </div>

                            

                            <!-- TODO: fix this horrible method of making this line up properly -->
                            <div style="display:inline-block">
                                <!-- note that we are deliberately not including this in a p tag because we don't want the handler to pick it up as an actual field -->
                                <nobr>
                                    <input id="checkbox-unknown-patient" type="checkbox">
                                    <label for="checkbox-unknown-patient">Unidentified Patient</label>
                                </nobr>
                            </div>

                            


                            <input type="hidden" name="preferred" value="true">
                        </fieldset>

                        <fieldset id="demographics-gender">
                            <legend id="genderLabel">Gender</legend>
                            <h3>What's the patient's gender?</h3>
                            

<p id="gender">

    <label for="gender-field">
         <span>(required)</span>
    </label>

    <select id="gender-field" name="gender" class="required" size="2" data-bind=", value: gender">

        
        
            <option value="M">Male</option>
        
            <option value="F">Female</option>
        
    </select>

    <span id="fr5192" class="field-error" style="display: none"></span>
</p>


<script type="text/javascript">
    var viewModel = viewModel || {};
    viewModel.validations = viewModel.validations || [];

    viewModel.gender = ko.observable();
    
    viewModel.validations.push(function() {
        return jq('#gender-field').is(':disabled') || (viewModel.gender() ? true : false);
    });
    
</script>

                            <!-- we "hide" the unknown flag here since gender is the only field not hidden for an unknown patient -->
                            <input id="demographics-unknown" type="hidden" name="unknown" value="false">
                        </fieldset>

                        <fieldset id="demographics-birthdate" class="multiple-input-date date-required no-future-date">
                            <legend id="birthdateLabel">Birthdate</legend>
                            <h3>What's the patient's birth date?</h3>
                            

<script type="text/javascript">
    var birthdateDay = '';
    var birthdateMonth = '';
    var birthdateYear = '';

    jQuery(document).ready(function(){
        

        _.each(jQuery('.date-component'), function(dateElement){
            jQuery(dateElement).blur(function(){
                var elementValue = '';
                if(this.value && jQuery.trim(this.value).length > 0)
                    elementValue = jQuery.trim(this.value);

                if(this.id == 'birthdateDay-field'){
                    if(elementValue.length > 0)
                        birthdateDay = elementValue;
                    else
                        birthdateDay = '';
                }else if(this.id == 'birthdateMonth-field'){
                    if(elementValue.length > 0)
                        birthdateMonth = elementValue;
                    else
                        birthdateMonth = '';
                }else if (this.id == 'birthdateYear-field'){
                    if(elementValue.length > 0)
                        birthdateYear = elementValue;
                    else
                        birthdateYear = '';
                }

                if (birthdateYear != '' && birthdateMonth != '' && birthdateDay != '') {
                    jQuery('#birthdate-value').val(birthdateYear+"-"+birthdateMonth+"-"+birthdateDay);
                } else {
                    jQuery('#birthdate-value').val('');
                }
            });
        });
    });

</script>

<p id="fr67">
    <label for="fr67-field">
         
    </label>
    <span id="fr6743" class="field-error" style="display: none"></span>

    

</p><p class="left">
    <label for="birthdateDay-field">
        Day 
    </label>
    <input type="text" id="birthdateDay-field" name="birthdateDay" value="" class="day number numeric-range date-component" size="5" maxlength="2" min="1" max="31">
    
    <span id="fr5900" class="field-error" style="display: none">
	
</span>
    
    
</p>
    

<p id="birthdateMonth" class="left">

    <label for="birthdateMonth-field">
        Month 
    </label>

    <select id="birthdateMonth-field" name="birthdateMonth" class="month date-component">

        
            <option value="">Select</option>
        
        
            <option value="1">January</option>
        
            <option value="2">February</option>
        
            <option value="3">March</option>
        
            <option value="4">April</option>
        
            <option value="5">May</option>
        
            <option value="6">June</option>
        
            <option value="7">July</option>
        
            <option value="8">August</option>
        
            <option value="9">September</option>
        
            <option value="10">October</option>
        
            <option value="11">November</option>
        
            <option value="12">December</option>
        
    </select>

    <span id="fr5657" class="field-error" style="display: none">
	
</span>
</p>


    

<p class="left">
    <label for="birthdateYear-field">
        Year 
    </label>
    <input type="text" id="birthdateYear-field" name="birthdateYear" value="" class="year number numeric-range date-component" size="5" maxlength="4" min="1899" max="2019">
    
    <span id="fr1928" class="field-error" style="display: none">
	
</span>
    
    
</p>
            
    
	
    <div class="clear">
<p></p>

<script type="text/javascript">
    jQuery(function() {
        var yearsField = jQuery('#birthdateYears-field');
        var monthsField = jQuery('#birthdateMonths-field');
        var estimatedField = jQuery('#birthdateEstimated-field');

        var skipField = function() {
            e = jQuery.Event('keydown');
            e.which = 13; // enter
            yearsField.trigger(e);
        };

        var isExactDate = function() {
            var isEstimatedChecked = jQuery('#birthdateEstimated-field').is(':checked');
            return (jQuery('#birthdate-value').val() != '' && !isEstimatedChecked);
        }

        var toggleEstimatedDate = function() {
            if(isExactDate()) {
                yearsField.val('');
                yearsField.prop('disabled', true);
                monthsField.val('');
                monthsField.prop('disabled', true);
            } else {
                yearsField.prop('disabled', false);
                monthsField.prop('disabled', false);
            }
        };

        var clearExactDateFields = function() {
            birthdateDay = '';
            birthdateMonth = '';
            birthdateYear = '';
            jQuery('#birthdateDay-field').val('');
            jQuery('#birthdateMonth-field').val('');
            jQuery('#birthdateYear-field').val('');

            if (birthdateYear != '' && birthdateMonth != '' && birthdateDay != '') {
                jQuery('#birthdate-value').val(birthdateYear+"-"+birthdateMonth+"-"+birthdateDay);
            } else {
                jQuery('#birthdate-value').val('');
            }
        }

        jQuery(estimatedField).change(function() {
            toggleEstimatedDate();
        });

        jQuery(yearsField).blur(function() {
            var elementValue = '';
            if(this.value && jQuery.trim(this.value).length > 0)
                elementValue = jQuery.trim(this.value);

            if(elementValue.length > 0) {
                birthdateYears = elementValue;
                clearExactDateFields();
            }else {
                birthdateYears = '';
            }

        });

        jQuery(monthsField).blur(function() {
            var elementValue = '';
            if(this.value && jQuery.trim(this.value).length > 0)
                elementValue = jQuery.trim(this.value);

            if(elementValue.length > 0) {
                birthdateMonths = elementValue;
                clearExactDateFields();
            }else {
                birthdateMonths = '';
            }

        });

        jQuery(yearsField).focus(toggleEstimatedDate);
        jQuery(monthsField).focus(toggleEstimatedDate);
    });
</script>
<p>&nbsp;</p>
<h3>Or</h3>
<p>
    

</p><p class="left">
    <label for="birthdateYears-field">
        Estimated Years 
    </label>
    <input type="text" id="birthdateYears-field" name="birthdateYears" value="" class="years number numeric-range date-component" maxlength="3" min="0" max="120">
    
    <span id="fr9756" class="field-error" style="display: none">
	
</span>
    <span class="append-to-value hidden"> year(s)</span>
    
</p>

    

<p class="left">
    <label for="birthdateMonths-field">
        Estimated Months 
    </label>
    <input type="text" id="birthdateMonths-field" name="birthdateMonths" value="" class="months number numeric-range date-component" maxlength="2" min="0" max="11">
    
    <span id="fr300" class="field-error" style="display: none">
	
</span>
    <span class="append-to-value hidden"> month(s)</span>
    
</p>
<p></p>


<input id="birthdate-value" type="hidden" name="birthdate">

                        </div></fieldset>
                    

                    <!-- allow customization of additional question in the patient identification section, if it is included -->
                    

                    
            </section>
        
            <section id="contactInfo" class="non-collapsible">
                

                    <!-- hardcoded name, gender, and birthdate are added for the demographics section -->
                    

                    <!-- allow customization of additional question in the patient identification section, if it is included -->
                    

                    
                        <fieldset id="null" class="requireOne">
                            <legend>Address</legend>
                            
                                <span id="fr7723" class="field-error" style="display: none">
	
</span>
                            
                            

                            
                                


        
            
        
            
            	 <p class="left">
					<label name="address1">
	        			Address
	        		</label>
	        		
                        <input type="text" id="address1" name="address1" value="" size="40" class="">
                        <span id="fr9043" class="field-error" style="display: none">
	
</span>
                    
	        	</p>
	        	 <p class="clear"></p>   
            
        

        
            
        
            
            	 <p class="left">
					<label name="address2">
	        			Address 2
	        		</label>
	        		
                        <input type="text" id="address2" name="address2" value="" size="40" class="">
                        <span id="fr4649" class="field-error" style="display: none">
	
</span>
                    
	        	</p>
	        	 <p class="clear"></p>   
            
        

        
            
        
            
            	 <p class="left">
					<label name="cityVillage">
	        			City/Village
	        		</label>
	        		
                        <input type="text" id="cityVillage" name="cityVillage" value="" size="10" class="">
                        <span id="fr4168" class="field-error" style="display: none">
	
</span>
                    
	        	</p>
	        	  
            
        
            
        
            
            	 <p class="left">
					<label name="stateProvince">
	        			State/Province
	        		</label>
	        		
                        <input type="text" id="stateProvince" name="stateProvince" value="" size="10" class="">
                        <span id="fr9630" class="field-error" style="display: none">
	
</span>
                    
	        	</p>
	        	  
            
        
            
        
            
            	 <p class="left">
					<label name="country">
	        			Country
	        		</label>
	        		
                        <input type="text" id="country" name="country" value="" size="10" class="">
                        <span id="fr7576" class="field-error" style="display: none">
	
</span>
                    
	        	</p>
	        	  
            
        
            
        
            
            	 <p class="left">
					<label name="postalCode">
	        			Postal Code
	        		</label>
	        		
                        <input type="text" id="postalCode" name="postalCode" value="" size="10" class="">
                        <span id="fr2790" class="field-error" style="display: none">
	
</span>
                    
	        	</p>
	        	 <p class="clear"></p>   
            
        


                            
                        </fieldset>
                    
                        <fieldset id="phoneNumberLabel">
                            <legend>Phone Number</legend>
                            
                            

                            
                                

<p class="left">
    <label for="fr2422-field">
        What's the patient phone number? 
    </label>
    <input type="text" id="fr2422-field" name="phoneNumber" value="" class="phone">
    
    <span id="fr3936" class="field-error" style="display: none">
	
</span>
    
    
</p>
                            
                        </fieldset>
                    
            </section>
        
            <section id="relationships-info" class="non-collapsible">
                

                    <!-- hardcoded name, gender, and birthdate are added for the demographics section -->
                    

                    <!-- allow customization of additional question in the patient identification section, if it is included -->
                    

                    
                        <fieldset id="null">
                            <legend>Relatives</legend>
                            
                            
                                    <h3>Who is the patient related to?</h3>
                            

                            
                                

<div ng-app="personRelationships" ng-controller="PersonRelationshipController" class="ng-scope">

    <!-- ngRepeat: relationship in relationships --><div ng-repeat="relationship in relationships" class="ng-scope">
        <p class="left">
            <select id="relationship_type" name="relationship_type" class="rel_type ng-pristine ng-untouched ng-valid ng-empty" ng-model="relationship.type">
                <option value="">Select Relationship Type</option>
                
                <option value="8d919b58-c2cc-11de-8d13-0010c6dffd0f-A">Doctor</option>
                
                <option value="8d91a01c-c2cc-11de-8d13-0010c6dffd0f-A">Sibling</option>
                
                <option value="8d91a210-c2cc-11de-8d13-0010c6dffd0f-A">Parent</option>
                
                <option value="8d91a3dc-c2cc-11de-8d13-0010c6dffd0f-A">Aunt/Uncle</option>
                
                <option value="2a5f4ff4-a179-4b8a-aa4c-40f71956ebbc-A">Supervisor</option>
                
                
                
                <option value="8d919b58-c2cc-11de-8d13-0010c6dffd0f-B">Patient</option>
                
                
                
                
                
                <option value="8d91a210-c2cc-11de-8d13-0010c6dffd0f-B">Child</option>
                
                
                
                <option value="8d91a3dc-c2cc-11de-8d13-0010c6dffd0f-B">Niece/Nephew</option>
                
                
                
                <option value="2a5f4ff4-a179-4b8a-aa4c-40f71956ebbc-B">Supervisee</option>
                
                
            </select>
        </p>

        <p class="left">
            <input type="text" class="person-typeahead ng-pristine ng-untouched ng-valid ng-empty" placeholder="Person Name" ng-model="relationship.name" typeahead="person as person.display for person in getPersons($viewValue) | limitTo:5" typeahead-min-length="3" typeahead-on-select="selectPerson($item, $index)"><ul class="typeahead dropdown-menu ng-isolate-scope" ng-style="{display: isOpen()&amp;&amp;'block' || 'none', top: position.top+'px', left: position.left+'px'}" matches="matches" active="activeIdx" select="select(activeIdx)" query="query" position="position" style="display: none;">
    <!-- ngRepeat: match in matches -->
</ul>
            <input type="text" name="other_person_uuid" ng-model="relationship.uuid" ng-show="false" class="ng-pristine ng-untouched ng-valid ng-empty ng-hide">
        </p>

        <p style="padding: 10px">
            <a ng-click="addNewRelationship()">
                <i class="icon-plus-sign edit-action"></i>
            </a>
            <a ng-click="removeRelationship(relationship)">
                <i class="icon-minus-sign edit-action"></i>
            </a>
        </p>
    </div><!-- end ngRepeat: relationship in relationships -->
</div>
                            
                        </fieldset>
                    
            </section>
        

        

        <div id="confirmation">
            
            <div class="before-dataCanvas"></div>
            <div id="dataCanvas"></div>
            <div class="after-data-canvas"></div>
            <div id="exact-matches" style="display: none; margin-bottom: 20px">
                <span class="field-error">There seems to be a patient in the database that exactly matches this one. Please review before confirming:</span>
                <ul id="exactPatientsSelect" class="select"></ul>
            </div>
            <div id="confirmationQuestion">
                Confirm submission?
                <p style="display: inline">
                    <input id="submit" type="submit" class="submitButton confirm right" value="Confirm">
                </p>
                <p style="display: inline">
                    <input id="cancelSubmission" class="cancel" type="button" value="Cancel">
                </p>
            </div>
        </div>
    </form>
</div>

    </div>

</div>

<script id="breadcrumb-template" type="text/template">
    <li>
        {{ if (!first) { }}
        <i class="icon-chevron-right link"></i>
        {{ } }}
        {{ if (!last && breadcrumb.link) { }}
        <a href="{{= breadcrumb.link }}">
        {{ } }}
        {{ if (breadcrumb.icon) { }}
        <i class="{{= breadcrumb.icon }} small"></i>
        {{ } }}
        {{ if (breadcrumb.label) { }}
        {{= breadcrumb.label }}
        {{ } }}
        {{ if (!last && breadcrumb.link) { }}
        </a>
        {{ } }}
    </li>
</script>

<script type="text/javascript">
    jq(function() {
        emr.updateBreadcrumbs();
    });

    // global error handler
    jq(document).ajaxError(function(event, jqxhr) {
        emr.redirectOnAuthenticationFailure(jqxhr);
    });

    var featureToggles = {};

    

</script>

    
 <ul class="ui-autocomplete ui-menu ui-widget ui-widget-content ui-corner-all" id="ui-id-1" tabindex="0" style="z-index: 1; display: none;"></ul><ul class="ui-autocomplete ui-menu ui-widget ui-widget-content ui-corner-all" id="ui-id-2" tabindex="0" style="z-index: 1; display: none;"></ul><ul class="ui-autocomplete ui-menu ui-widget ui-widget-content ui-corner-all" id="ui-id-3" tabindex="0" style="z-index: 1; display: none;"></ul></body></html>